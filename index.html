<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SpeedType Pro — Typing Test</title>
  <meta name="description" content="Professional, colorful typing test with real timer, live WPM, accuracy, and an auto-generated certificate you can download." />
  <style>
    :root{
      --bg1:#0ea5e9; --bg2:#7c3aed; --card:#0b1020cc; --accent:#22d3ee; --good:#22c55e; --bad:#ef4444; --muted:#9aa4b2; --ring:#60a5fa;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; color:#eef2ff;
      background: radial-gradient(1200px 600px at 10% 10%, rgba(255,255,255,.06), transparent),
                  radial-gradient(1200px 600px at 90% 20%, rgba(255,255,255,.04), transparent),
                  linear-gradient(135deg,var(--bg1),var(--bg2));
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    .container{max-width:1100px;margin:20px auto;padding:20px}
    .glass{background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));border:1px solid rgba(255,255,255,.08);border-radius:18px;backdrop-filter: blur(8px);box-shadow:0 25px 60px rgba(2,6,23,.45)}
    .header{display:flex;align-items:center;gap:16px;padding:18px 22px}
    .logo{width:46px;height:46px;border-radius:10px;background:conic-gradient(from 120deg,var(--accent),#a78bfa,#38bdf8,var(--accent));box-shadow:0 8px 24px rgba(2,6,23,.45)}
    h1{font-size:clamp(1.3rem, 1.2rem + 1.6vw, 2rem);margin:0}
    .sub{color:#dbeafe;margin-top:2px;opacity:.95}

    .grid{display:grid;grid-template-columns:1.1fr .9fr;gap:18px;padding:18px}
    @media(max-width:980px){.grid{grid-template-columns:1fr}}

    .card{padding:14px;border-radius:14px}
    .toolbar{display:flex;flex-wrap:wrap;gap:12px;align-items:center;margin-bottom:12px}
    .field{display:flex;gap:8px;align-items:center;background:rgba(11,16,32,.24);border:1px solid rgba(255,255,255,.06);padding:8px 10px;border-radius:12px}
    label{font-size:.92rem;color:#dbeafeaa}
    input[type="text"]{background:transparent;border:none;color:#fff;outline:none;padding:6px}

    /* Make selects very readable (fixes the issue you mentioned) */
    select{appearance:auto;padding:8px 10px;border-radius:10px;border:1px solid rgba(11,16,32,.35);background:#ffffff;color:#111827;font-weight:600}
    option{color:#111827}

    .btn{cursor:pointer;border:none;border-radius:12px;padding:10px 14px;font-weight:700;color:#0b1020;background:linear-gradient(135deg,#a7f3d0,#67e8f9);box-shadow:0 10px 26px rgba(2,6,23,.35)}
    .btn:disabled{opacity:.6;cursor:not-allowed}
    .btn.alt{background:linear-gradient(135deg,#fde68a,#fca5a5)}
    .btn.ghost{background:transparent;color:#e2e8f0;border:1px dashed rgba(255,255,255,.08)}

    .paragraph{user-select:none;background:rgba(11,16,32,.24);border:1px solid rgba(255,255,255,.06);border-radius:12px;padding:16px;line-height:1.8;min-height:150px;color:#e6eef8}
    .paragraph .char{opacity:.7}
    .paragraph .correct{color:var(--good);opacity:1}
    .paragraph .wrong{color:var(--bad);opacity:1;text-decoration:underline}
    .cursor{display:inline-block;width:2px;background:var(--accent);animation:blink 1s steps(1,end) infinite;vertical-align:-3px}
    @keyframes blink{50%{opacity:0}}

    .typebox{width:100%;margin-top:12px;padding:12px 14px;border-radius:12px;border:1px solid rgba(255,255,255,.06);background:rgba(11,16,32,.24);color:#fff;resize:vertical}
    .typebox:focus{outline:2px solid var(--ring);box-shadow:0 0 0 6px rgba(96,165,250,.08)}

    .stats{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px;margin-top:12px}
    .stat{background:rgba(11,16,32,.2);border-radius:10px;padding:10px;text-align:center;border:1px solid rgba(255,255,255,.04)}
    .stat h3{margin:0;font-size:.9rem;color:#cbd5e1}
    .stat p{margin:6px 0 0;font-weight:800;font-size:1.4rem}

    .cert{padding:12px}
    .cert canvas{width:100%;max-width:100%;background:#fff;border-radius:14px;display:block;border:6px solid #0b1020;box-shadow:0 10px 30px rgba(2,6,23,.45)}

    .footer{opacity:.9;font-size:.86rem;padding:12px 6px;text-align:center;color:#e6eef8}

    /* Overlay for last 3 seconds and Time Over */
    .overlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(2,6,23,.55);z-index:9999}
    .overlay.active{display:flex}
    .overlay-card{background:linear-gradient(135deg,#ffffff,#f1f5f9);padding:22px 28px;border-radius:12px;box-shadow:0 20px 60px rgba(2,6,23,.6);text-align:center}
    .overlay-card h2{margin:0;font-size:2.4rem;color:#111827}
    .overlay-card p{margin:8px 0 0;color:#374151}
    .overlay-card button{margin-top:12px}

    .copyright{font-size:.85rem;color:#dbeafecc}
  </style>
</head>
<body>
  <div class="container">
    <div class="glass">
      <div class="header">
        <div class="logo" aria-hidden></div>
        <div>
          <h1>SpeedType <span style="color:var(--accent);">Pro</span></h1>
          <div class="sub">Professional, colorful typing test — real timer, live WPM & accuracy, and downloadable certificate.</div>
        </div>
        <div style="margin-left:auto" class="badge" title="Everything runs locally in your browser.">✅ Works Offline</div>
      </div>

      <div class="grid">
        <!-- LEFT: Test area -->
        <section class="card">
          <div class="toolbar">
            <div class="field"><label for="name">Your Name:</label><input id="name" type="text" placeholder="Enter full name (examiner)" /></div>
            <div class="field"><label for="duration">Duration:</label>
              <select id="duration" title="Choose test duration">
                <option value="60">1 Minute</option>
                <option value="120">2 Minutes</option>
                <option value="180">3 Minutes</option>
                <option value="300">5 Minutes</option>
              </select>
            </div>
            <div class="field"><label for="paragraphSelect">Paragraph:</label>
              <select id="paragraphSelect" title="Choose paragraph"></select>
            </div>
            <button id="btnStart" class="btn">Start Test</button>
            <button id="btnReset" class="btn ghost">Reset</button>
          </div>

          <!-- TIMER on top -->
          <div class="stats" aria-hidden="false">
            <div class="stat" style="grid-column:span 3"><h3>Time Left</h3><p id="time">60s</p></div>
            <div class="stat"><h3>WPM</h3><p id="wpm">0</p></div>
            <div class="stat"><h3>Accuracy</h3><p id="acc">100%</p></div>
            <div class="stat"><h3>Errors</h3><p id="errs">0</p></div>
          </div>

          <div id="paragraph" class="paragraph" aria-live="polite"></div>
          <textarea id="typebox" class="typebox" rows="4" placeholder="Start typing here..." disabled></textarea>
        </section>

        <!-- RIGHT: Certificate preview -->
        <aside class="card cert">
          <div class="toolbar" style="justify-content:space-between">
            <div class="copyright">© Monish Panday — SpeedType Pro</div>
            <div style="display:flex;gap:8px;align-items:center;">
              <button id="btnGenerateCert" class="btn alt" disabled>Generate Certificate</button>
              <button id="btnDownloadPNG" class="btn" disabled>Download PNG</button>
              <button id="btnPrint" class="btn ghost" disabled>Print</button>
            </div>
          </div>
          <canvas id="certCanvas" width="1600" height="1131" aria-label="Certificate preview"></canvas>
          <div class="footer">Tip: Enter your name (examiner), choose duration, click <strong>Start Test</strong>, type until timer ends, then click <strong>Generate Certificate</strong>.</div>
        </aside>
      </div>
    </div>
  </div>

  <!-- Overlay (last 3 seconds / time over) -->
  <div id="overlay" class="overlay" role="dialog" aria-hidden="true">
    <div class="overlay-card">
      <h2 id="overlayTitle">FAST!</h2>
      <p id="overlayMsg">Only a few seconds left — keep going!</p>
      <div style="display:flex;gap:10px;justify-content:center">
        <button id="overlayClose" class="btn">OK</button>
      </div>
    </div>
  </div>

  <script>
    // ---------------- paragraphs ----------------
    const PARAGRAPHS = [
      "Practice makes progress. When you type a little every day, your fingers learn the path across the keyboard and your speed grows naturally.",
      "Typing is a conversation with your thoughts. Keep your posture relaxed, your wrists light, and your focus on accuracy before speed.",
      "The quick brown fox jumps over the lazy dog. This sentence includes every letter and is a classic warm-up for typists.",
      "Clarity beats complexity. Short sentences are easier to read and faster to type, especially when you are training your muscle memory.",
      "Great writers revise. First drafts are meant to exist, not to impress. Put words on the page, then polish them to a shine.",
      "Momentum matters more than motivation. Start small, continue steadily, and let consistency carry you across the finish line.",
      "Technology changes quickly, but clear communication never goes out of style. Good typing helps you share ideas with less friction.",
      "Errors are data, not disasters. Every typo shows you where to improve. Notice the pattern and adjust your technique.",
      "Type with intention. Breathe, align your hands on the home row, and let your eyes lead while your fingers follow.",
      "Skill builds in layers. Accuracy forms the foundation; speed arrives as a natural result of careful practice."
    ];

    // ---------------- elements ----------------
    const elParagraph = document.getElementById('paragraph');
    const elTypebox   = document.getElementById('typebox');
    const elTime      = document.getElementById('time');
    const elWpm       = document.getElementById('wpm');
    const elAcc       = document.getElementById('acc');
    const elErrs      = document.getElementById('errs');
    const elStart     = document.getElementById('btnStart');
    const elReset     = document.getElementById('btnReset');
    const elGenCert   = document.getElementById('btnGenerateCert');
    const elDownload  = document.getElementById('btnDownloadPNG');
    const elPrint     = document.getElementById('btnPrint');
    const elName      = document.getElementById('name');
    const elDuration  = document.getElementById('duration');
    const elParaSel   = document.getElementById('paragraphSelect');
    const overlay     = document.getElementById('overlay');
    const overlayTitle= document.getElementById('overlayTitle');
    const overlayMsg  = document.getElementById('overlayMsg');
    const overlayClose= document.getElementById('overlayClose');

    const elCanvas    = document.getElementById('certCanvas');
    const ctx         = elCanvas.getContext('2d');

    // populate paragraph select
    PARAGRAPHS.forEach((p,i)=>{
      const opt = document.createElement('option');
      opt.value = i;
      opt.textContent = `Paragraph ${i+1}`;
      elParaSel.appendChild(opt);
    });
    elParaSel.value = 0;

    // render paragraph
    let targetText = '';
    let spans = [];
    function renderParagraph(){
      elParagraph.innerHTML = '';
      targetText = PARAGRAPHS[parseInt(elParaSel.value,10)].replace(/\s+/g,' ').trim();
      spans = [];
      for(const ch of targetText){
        const s = document.createElement('span');
        s.textContent = ch;
        s.className = 'char';
        spans.push(s);
        elParagraph.appendChild(s);
      }
      const cursor = document.createElement('span'); cursor.className='cursor'; elParagraph.appendChild(cursor);
    }
    renderParagraph();
    elParaSel.addEventListener('change', ()=>{ if(isRunning) resetAll(); renderParagraph(); });

    // ---------------- timer & metrics ----------------
    let timerId = null;
    let isRunning = false;
    let startTime = 0;
    let timeLimit = 60; // seconds
    let typedChars = 0;
    let errorCount = 0;
    let flashShown = false; // 3 second popup shown
    let timeOver = false;

    function formatTime(s){ return `${Math.max(0, Math.ceil(s))}s`; }

    function calcWPM(){
      const elapsedSec = Math.max(1, (Date.now()-startTime)/1000);
      const grossWpm = (typedChars/5) / (elapsedSec/60);
      const netWpm = Math.max(0, grossWpm - (errorCount/(elapsedSec/60)));
      return Math.round(netWpm);
    }
    function calcAcc(){ if(typedChars===0) return 100; const correct = typedChars - errorCount; return Math.max(0, Math.round((correct/typedChars)*100)); }

    function showOverlay(title, msg, persist=false){ overlayTitle.textContent = title; overlayMsg.textContent = msg; overlay.classList.add('active'); overlay.setAttribute('aria-hidden','false'); if(!persist){ setTimeout(()=>{ hideOverlay(); }, 900); } }
    function hideOverlay(){ overlay.classList.remove('active'); overlay.setAttribute('aria-hidden','true'); }

    overlayClose.addEventListener('click', ()=>{ hideOverlay(); });

    function updateHUD(){
      const remaining = timeLimit - (Date.now()-startTime)/1000;
      elTime.textContent = formatTime(remaining);
      elWpm.textContent  = calcWPM();
      elAcc.textContent  = `${calcAcc()}%`;
      elErrs.textContent = errorCount;

      if(remaining <= 3 && remaining > 0 && !flashShown){
        flashShown = true;
        // a short but nice popup
        showOverlay('FAST!', 'Only 3 seconds left — type quickly!', false);
      }

      if(remaining <= 0){ finishTest(); }
    }

    function startTest(){
      if(isRunning) return;
      // examiner name must be present
      if(!elName.value.trim()){ alert('Please enter the examiner name before starting.'); elName.focus(); return; }

      isRunning = true;
      timeLimit = parseInt(elDuration.value,10);
      typedChars = 0; errorCount = 0; flashShown = false; timeOver = false;
      spans.forEach(s=>s.className='char');

      startTime = Date.now();
      elTypebox.value = '';
      elTypebox.disabled = false;
      elTypebox.focus();
      elStart.disabled = true;
      elGenCert.disabled = true; elDownload.disabled = true; elPrint.disabled = true;

      timerId = setInterval(updateHUD, 100);
    }

    function stopTimer(){ if(timerId){ clearInterval(timerId); timerId=null; } }

    function finishTest(){
      stopTimer(); isRunning = false; elTypebox.disabled = true; elGenCert.disabled = false; elDownload.disabled = false; elPrint.disabled = false;
      const elapsed = Math.round((Date.now()-startTime)/1000);
      // determine if completed or timed out
      if(typedChars < targetText.length){
        timeOver = true;
        // show persistent overlay with Time Over and allow user to close
        showOverlay('⏰ Time Over', 'You did not finish before the timer. Certificate will show TIME OVER.', true);
      } else {
        timeOver = false;
        showOverlay('✅ Done', `Test finished — ${elWpm.textContent} WPM`, false);
      }
      updateHUD();
    }

    function resetAll(){ stopTimer(); isRunning = false; typedChars = 0; errorCount = 0; timeOver = false; flashShown = false; elTypebox.value=''; elTypebox.disabled = true; elStart.disabled = false; elTime.textContent = formatTime(parseInt(elDuration.value,10)); elWpm.textContent='0'; elAcc.textContent='100%'; elErrs.textContent='0'; spans.forEach(s=>s.className='char'); }

    elDuration.addEventListener('change', ()=>{ if(!isRunning) elTime.textContent = formatTime(parseInt(elDuration.value,10)); });

    // typing logic
    elTypebox.addEventListener('input', ()=>{
      const v = elTypebox.value;
      const n = Math.min(v.length, spans.length);
      typedChars = v.length;
      errorCount = 0;
      for(let i=0;i<spans.length;i++){
        const s = spans[i];
        if(i<n){
          if(v[i]===targetText[i]) s.className='char correct';
          else { s.className='char wrong'; errorCount++; }
        } else { s.className='char'; }
      }
      // auto-finish early if user completes paragraph
      if(v.length >= targetText.length){ finishTest(); }
    });

    elStart.addEventListener('click', startTest);
    elReset.addEventListener('click', resetAll);

    // ---------------- certificate drawing ----------------
    function roundRect(c,x,y,w,h,r){ const rr=Math.min(r,w/2,h/2); c.beginPath(); c.moveTo(x+rr,y); c.arcTo(x+w,y,x+w,y+h,rr); c.arcTo(x+w,y+h,x,y+h,rr); c.arcTo(x,y+h,x,y,rr); c.arcTo(x,y,x+w,y,rr); c.closePath(); }

    function drawCertificate(){
      const W = elCanvas.width, H = elCanvas.height;
      // background
      const g = ctx.createLinearGradient(0,0,W,H); g.addColorStop(0,'#f8fafc'); g.addColorStop(1,'#eef2ff'); ctx.fillStyle = g; ctx.fillRect(0,0,W,H);

      // outer border
      ctx.lineWidth = 14; ctx.strokeStyle = '#0b1020'; roundRect(ctx,36,36,W-72,H-72,28); ctx.stroke();

      // faint watermark across the page (Monish Panday)
      ctx.save(); ctx.globalAlpha = 0.06; ctx.fillStyle = '#0b1020'; ctx.translate(W/2, H/2); ctx.rotate(-Math.PI/8); ctx.font = 'bold 140px Arial'; ctx.textAlign = 'center'; ctx.textBaseline = 'middle'; ctx.fillText('Monish Panday', 0, 0); ctx.restore();

      // heading
      ctx.fillStyle = '#0b1020'; ctx.textAlign = 'center'; ctx.font = '800 46px Arial'; ctx.fillText('Certificate of Typing Achievement', W/2, 170);
      ctx.font = '600 20px Arial'; ctx.fillStyle = '#374151'; ctx.fillText('This is to certify that', W/2, 215);

      // Candidate / Examiner name in large
      const candidate = elName.value.trim() || 'Anonymous';
      ctx.fillStyle = '#0b1020'; ctx.font = '800 56px Arial'; ctx.fillText(candidate, W/2, 290);

      // stats box
      ctx.save(); roundRect(ctx,180,360,W-360,260,18); ctx.fillStyle = '#ffffff'; ctx.fill(); ctx.strokeStyle = '#e6eef8'; ctx.lineWidth = 3; ctx.stroke();

      const wpm = parseInt(elWpm.textContent,10) || 0;
      const acc = elAcc.textContent || '0%';
      const errs = parseInt(elErrs.textContent,10) || 0;
      const durationMin = Math.round(parseInt(elDuration.value,10)/60);

      ctx.fillStyle = '#0b1020'; ctx.textAlign='center'; ctx.font = '700 44px Arial';
      if(timeOver) ctx.fillText('TIME OVER', W/2, 440); else ctx.fillText(`${wpm} WPM`, W/2, 440);

      ctx.font = '600 22px Arial'; ctx.fillStyle = '#374151'; ctx.fillText(`Accuracy: ${acc}  •  Errors: ${errs}  •  Duration: ${durationMin} min`, W/2, 490);

      const date = new Date(); const dateStr = date.toLocaleDateString(undefined, { year: 'numeric', month: 'long', day: 'numeric' });
      ctx.font = '600 18px Arial'; ctx.fillStyle = '#6b7280'; ctx.fillText(`Date: ${dateStr}`, W/2, 528);
      ctx.restore();

      // signatures
      ctx.textAlign = 'center'; ctx.fillStyle = '#111827'; ctx.font = '700 20px Arial';
      // Supervisor (fixed to Monish Panday)
      ctx.fillText('__________________________', W/2 - 300, 760);
      ctx.fillText('__________________________', W/2 + 300, 760);
      ctx.font = '600 18px Arial';
      ctx.fillText('Monish Panday', W/2 - 300, 792); // Supervisor
      ctx.fillText(candidate, W/2 + 300, 792); // Examiner (input name)

      // seal
      ctx.save(); const cx = W/2, cy = 900, r = 76; ctx.beginPath(); ctx.arc(cx, cy, r, 0, Math.PI*2); ctx.closePath(); ctx.fillStyle = '#fff7ed'; ctx.fill(); ctx.lineWidth = 6; ctx.strokeStyle = '#f59e0b'; ctx.stroke(); ctx.fillStyle = '#92400e'; ctx.font = '700 20px Arial'; ctx.textAlign='center'; ctx.textBaseline='middle'; ctx.fillText('OFFICIAL SEAL', cx, cy-8); ctx.font='700 16px Arial'; ctx.fillText('SpeedType Pro', cx, cy+16); ctx.restore();

      // small footer / copyright
      ctx.fillStyle = '#475569'; ctx.font = '600 14px Arial'; ctx.textAlign='center'; ctx.fillText('This certificate acknowledges the demonstrated typing speed and accuracy during a timed assessment.', W/2, H-48);
      ctx.fillStyle = '#94a3b8'; ctx.font='600 12px Arial'; ctx.fillText('© Monish Panday — SpeedType Pro', W/2, H-28);
    }

    function downloadPNG(){ const url = elCanvas.toDataURL('image/png'); const a = document.createElement('a'); const name = (elName.value.trim()||'SpeedTypePro') + '_Certificate.png'; a.href = url; a.download = name; a.click(); }
    function printCanvas(){ const w = window.open('', '_blank'); const dataURL = elCanvas.toDataURL('image/png'); w.document.write(`<!doctype html><title>Certificate</title><style>body{margin:0;display:grid;place-items:center;background:#fff}</style><img src="${dataURL}" style="max-width:100%;height:auto;"/>`); w.document.close(); w.focus(); w.print(); }

    elGenCert.addEventListener('click', ()=>{ drawCertificate(); });
    elDownload.addEventListener('click', downloadPNG);
    elPrint.addEventListener('click', printCanvas);

    // initialize UI
    elTime.textContent = formatTime(parseInt(elDuration.value,10));
    drawCertificate();
  </script>
</body>
</html>

    
          
